webpackJsonp([2],{"8GKx":function(s,t,e){"use strict";var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",[s._m(0),s._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[s._m(1),s._v(" "),e("div",{staticClass:"column is-9"},[e("router-view")],1)])])])},n=[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("nav",{staticClass:"navbar is-white"},[e("div",{staticClass:"container"},[e("div",{staticClass:"navbar-brand"},[e("a",{staticClass:"navbar-item brand-text",attrs:{href:"#"}},[s._v("\n          BitBucket Slack Notifier Admin\n        ")]),s._v(" "),e("div",{staticClass:"navbar-burger burger"},[e("span"),s._v(" "),e("span"),s._v(" "),e("span")])]),s._v(" "),e("div",{staticClass:"navbar-menu",attrs:{id:"navMenu"}},[e("div",{staticClass:"navbar-start"},[e("a",{staticClass:"navbar-item",attrs:{href:"#"}},[s._v("\n            Home\n          ")])])])])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"column is-3"},[e("aside",{staticClass:"menu"},[e("p",{staticClass:"menu-label"},[s._v("\n            General\n          ")]),s._v(" "),e("ul",{staticClass:"menu-list"},[e("li",[e("a",{staticClass:"is-active"},[s._v("User Mappings")])]),s._v(" "),e("li",[e("a",[s._v("Other")])])])])])}],i={render:a,staticRenderFns:n};t.a=i},"8lWH":function(s,t,e){"use strict";var a=e("woOf"),n=e.n(a),i=e("fZjL"),r=e.n(i),c=e("BO1k"),l=e.n(c),u=e("mtWM"),o=e.n(u),d=e("wQ3t"),v=e.n(d);t.a={name:"UserMapper",data:function(){return{newUser:{bitBucketId:"",slackId:"",status:""},users:[]}},created:function(){var s=this;o.a.get("/users").then(function(t){s.users=s.usersToKeyValues(t.data)})},methods:{usersToKeyValues:function(s){var t=[],e=!0,a=!1,n=void 0;try{for(var i,c=l()(r()(s));!(e=(i=c.next()).done);e=!0){var u=i.value;t.push({bitBucketId:u,slackId:s[u]})}}catch(s){a=!0,n=s}finally{try{!e&&c.return&&c.return()}finally{if(a)throw n}}return t},testUserMapping:function(s){var t=this;this.$set(s,"loading",!0),v.a.pullRequestUrl=location.href,v.a.pullRequestReviewers=s.bitBucketId,o.a.post("/notify",v.a).then(function(e){t.$set(s,"status","success"),t.$set(s,"loading",!1)}).catch(function(e){t.$set(s,"status","error"),t.$set(s,"loading",!1)})},testSlackChannel:function(s){var t=this;this.$set(s,"slackLoading",!0),o.a.post("/notify/test",{channel:s.slackId,url:location.href}).then(function(e){t.$set(s,"slackStatus","success"),t.$set(s,"slackLoading",!1)}).catch(function(e){t.$set(s,"slackStatus","error"),t.$set(s,"slackLoading",!1)})},addUserMapping:function(){this.newUser.slackId&&this.newUser.bitBucketId&&(this.users.push(n()({unsaved:!0},this.newUser)),this.newUser.slackId="",this.newUser.bitBucketId="",this.newUser.status="")},removeUserMapping:function(s){this.users.splice(this.users.indexOf(s),1)},saveMappings:function(){var s=this,t={};this.users.forEach(function(s){t[s.bitBucketId]=s.slackId}),o.a.post("/users",t).then(function(t){s.users.forEach(function(s){s.unsaved=!1})})}}}},M93x:function(s,t,e){"use strict";var a=e("xJD8"),n=e("8GKx"),i=e("VU/8"),r=i(a.a,n.a,!1,null,null,null);t.a=r.exports},NHnr:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("7+uW"),n=e("M93x"),i=e("YaEn");e.e(0).then(e.bind(null,"GK12")),a.a.config.productionTip=!1,new a.a({el:"#app",router:i.a,template:"<App/>",components:{App:n.a}})},QrgU:function(s,t,e){"use strict";function a(s){e("u6pd")}var n=e("8lWH"),i=e("uyFi"),r=e("VU/8"),c=a,l=r(n.a,i.a,!1,c,"data-v-610c6558",null);t.a=l.exports},YaEn:function(s,t,e){"use strict";var a=e("7+uW"),n=e("/ocq"),i=e("QrgU");a.a.use(n.a),t.a=new n.a({routes:[{path:"/",name:"UserMapper",component:i.a}]})},u6pd:function(s,t){},uyFi:function(s,t,e){"use strict";var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",[e("div",{staticClass:"card"},[e("div",{staticClass:"card-table"},[e("div",{staticClass:"content"},[e("table",{staticClass:"table is-fullwidth is-striped"},[s._m(0),s._v(" "),e("tbody",[e("tr",[e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:s.newUser.bitBucketId,expression:"newUser.bitBucketId"}],staticClass:"input is-small",attrs:{placeholder:"BitBucket Id"},domProps:{value:s.newUser.bitBucketId},on:{input:function(t){t.target.composing||s.$set(s.newUser,"bitBucketId",t.target.value)}}})]),s._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:s.newUser.slackId,expression:"newUser.slackId"}],staticClass:"input is-small",attrs:{placeholder:"Slack Id"},domProps:{value:s.newUser.slackId},on:{input:function(t){t.target.composing||s.$set(s.newUser,"slackId",t.target.value)}}})]),s._v(" "),e("td",[e("a",{staticClass:"button is-small",class:{"is-loading":s.newUser.slackLoading,"is-success":"success"==s.newUser.slackStatus,"is-danger":"error"==s.newUser.slackStatus},attrs:{disabled:!s.newUser.slackId},on:{click:function(t){s.testSlackChannel(s.newUser)}}},[s._v("Test Slack ID")]),s._v(" "),e("a",{staticClass:"button is-small is-success",attrs:{disabled:!s.newUser.bitBucketId||!s.newUser.slackId},on:{click:s.addUserMapping}},[s._v("Add")])])]),s._v(" "),s._l(s.users,function(t){return e("tr",{class:{"is-selected":t.unsaved}},[e("td",[s._v(s._s(t.bitBucketId))]),s._v(" "),e("td",[s._v(s._s(t.slackId))]),s._v(" "),e("td",[e("a",{staticClass:"button is-small test-slack",class:{"is-loading":t.slackLoading,"is-success":"success"==t.slackStatus,"is-danger":"error"==t.slackStatus},on:{click:function(e){s.testSlackChannel(t)}}},[s._v("Test Slack ID")]),s._v(" "),t.unsaved?s._e():e("a",{staticClass:"button is-small",class:{"is-loading":t.loading,"is-success":"success"==t.status,"is-danger":"error"==t.status},on:{click:function(e){s.testUserMapping(t)}}},[s._v("\n                Test Mapping\n              ")]),s._v(" "),e("a",{staticClass:"button is-small is-danger",on:{click:function(e){s.removeUserMapping(t)}}},[s._v("\n                Remove\n              ")])])])})],2)])])]),s._v(" "),e("footer",{staticClass:"card-footer"},[e("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:s.saveMappings}},[s._v("Save User Mappings")])])])])},n=[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("thead",[e("tr",[e("td",[s._v("BitBucket Id")]),s._v(" "),e("td",[s._v("Slack Id")]),s._v(" "),e("td",[s._v("Actions")])])])}],i={render:a,staticRenderFns:n};t.a=i},wQ3t:function(s,t){s.exports={pullRequestReviewers:"iminin",pullRequestTitle:"Test BitBucket Notifier message: SUCCESS",pullRequestUrl:"http://stackoverflow.com/questions/111102/how-do-javascript-closures-work",pullRequestAuthorDisplayName:"Bitbucket Bot",pullRequestAction:"BUTTON_TRIGGER",buttonTrigger:"",pullRequestAuthor:"iminin",pullRequestApprovedCount:2,triggerUser:"test",triggerDisplayName:"Test",comment:"This is a successful test message",commentAction:"ADDED",buildFailed:!0}},xJD8:function(s,t,e){"use strict";t.a={data:function(){return{}},props:{source:String}}}},["NHnr"]);
//# sourceMappingURL=app.3acf39bb44aba2f0e5c7.js.map